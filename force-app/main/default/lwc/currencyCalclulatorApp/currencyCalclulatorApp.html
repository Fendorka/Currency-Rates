<template>
  <lightning-card>
    <template if:true={isReady}>
      <lightning-layout multiple-rows="true">
        <lightning-layout-item
          size="12"
          medium-device-size="6"
          padding="around-small"
        >
          <c-currency-rates
            rates={data}
            date={date}
            base={base}
            favourites={favourites}
            ratesperpage={ratesperpage}
            onnewbasecurrency={handleBaseCurrencyChange}
            ontogglefavourite={handleFavouriteCurrencyChange}
          >
          </c-currency-rates>
        </lightning-layout-item>

        <lightning-layout-item
          size="12"
          medium-device-size="6"
          padding="around-small"
        >
          <c-converter
            rates={data}
            basecurrency={base}
            onnewbasecurrency={handleBaseCurrencyChange}
          ></c-converter>
        </lightning-layout-item>
      </lightning-layout>
    </template>
  </lightning-card>

  <template if:false={isReady}>
    <template if:false={error}>
      <div
        class="slds-is-relative"
        style="min-height: 50vh; min-width: 50vw; background-color: transparent"
      >
        <lightning-spinner
          alternative-text="Loading"
          size="large"
        ></lightning-spinner>
      </div>
    </template>

    <template if:true={error}>
      {error}

      <lightning-button
        onclick={retry}
        label="Retry"
        variant="neutral"
        class="slds-p-around--xx-small"
        icon-name="utility:refresh"
      ></lightning-button>
    </template>
  </template>
</template>
